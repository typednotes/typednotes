[package]
name = "web"
version = "0.1.0"
edition = "2021"

[dependencies]
dioxus = { workspace = true, features = ["router", "fullstack"] }
ui = { workspace = true }
api = { workspace = true }

# Server-only dependencies
axum = { version = "0.8", optional = true }
tower = { version = "0.5", optional = true }
tower-sessions = { version = "0.14", optional = true }
tower-sessions-sqlx-store = { version = "0.15", features = ["postgres"], optional = true }
tokio = { version = "1", features = ["full"], optional = true }
tracing = { version = "0.1", optional = true }
tracing-subscriber = { version = "0.3", optional = true }
sqlx = { version = "0.8", features = ["runtime-tokio", "postgres"], optional = true }
dotenvy = { version = "0.15", optional = true }

[target.'cfg(target_arch = "wasm32")'.dependencies]
web-sys = { version = "0.3", features = ["Window", "Location"] }

[features]
default = []
web = ["dioxus/web"]
server = [
    "dioxus/server",
    "ui/server",
    "api/server",
    "axum",
    "tower",
    "tower-sessions",
    "tower-sessions-sqlx-store",
    "tokio",
    "tracing",
    "tracing-subscriber",
    "sqlx",
    "dotenvy",
]
