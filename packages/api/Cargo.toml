[package]
name = "api"
version = "0.1.0"
edition = "2021"

[dependencies]
dioxus = { workspace = true, features = ["fullstack"] }
serde = { version = "1.0", features = ["derive"] }
store = { workspace = true }

# Server-only dependencies
oauth2 = { version = "5.0", optional = true }
tower-sessions = { version = "0.14", optional = true }
tower-sessions-sqlx-store = { version = "0.15", features = ["postgres"], optional = true }
sqlx = { version = "0.8", features = ["runtime-tokio", "tls-rustls", "postgres", "uuid", "chrono"], optional = true }
uuid = { version = "1.0", features = ["v4", "serde"], optional = true }
chrono = { version = "0.4", features = ["serde"], optional = true }
reqwest = { version = "0.12", features = ["json"], optional = true }
thiserror = { version = "2.0", optional = true }
dotenvy = { version = "0.15", optional = true }
tokio = { version = "1", features = ["sync"], optional = true }
argon2 = { version = "0.5", optional = true }
aes-gcm = { version = "0.10", optional = true }
rand = { version = "0.8", optional = true }
ssh-key = { version = "0.6", features = ["ed25519", "rsa"], optional = true }
hex = { version = "0.4", optional = true }
git2 = { version = "0.19", features = ["vendored-libgit2", "ssh"], optional = true }

[features]
server = [
    "dioxus/server",
    "oauth2",
    "tower-sessions",
    "tower-sessions-sqlx-store",
    "sqlx",
    "uuid",
    "chrono",
    "reqwest",
    "thiserror",
    "dotenvy",
    "tokio",
    "argon2",
    "aes-gcm",
    "rand",
    "ssh-key",
    "hex",
    "git2",
]
